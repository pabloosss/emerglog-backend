<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8"/>
  <title>Generator PDFKit</title>
</head>
<body>
  <h1>Generator Godzin – PDFKit</h1>
  <form id="sendForm">
    <label>Imię i nazwisko: <input type="text" id="name" required></label><br><br>
    <label>Łączna liczba godzin: <input type="number" id="hours" value="160"></label><br><br>
    <button type="submit">Wyślij PDF do Pawła</button>
  </form>

  <script>
  document.getElementById("sendForm").addEventListener("submit", async(e)=>{
    e.preventDefault();
    const name = document.getElementById("name").value.trim();
    const hours = parseInt(document.getElementById("hours").value,10)||0;

    try {
      const resp = await fetch("/send-pdf", {
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body: JSON.stringify({ name, hours })
      });
      const data = await resp.json();
      if(resp.ok){
        alert(data.message);
      } else {
        alert("Błąd: "+data.message);
      }
    } catch(err){
      alert("Błąd fetch: "+err);
    }
  });
  </script>
</body>
</html>
